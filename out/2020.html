<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>2020</title><meta name="robots" content="index,follow"/><meta property="og:title" content="2020"/><meta name="next-head-count" content="5"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard-dynamic-subset.css"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-a054bbf31fb90f6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-10b65949dede42d7.js" defer=""></script><script src="/_next/static/chunks/962-69674526bb4c5f05.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D-b10f260dac7ce822.js" defer=""></script><script src="/_next/static/dwZwPqOhb2-foW3pXeSaR/_buildManifest.js" defer=""></script><script src="/_next/static/dwZwPqOhb2-foW3pXeSaR/_ssgManifest.js" defer=""></script><script src="/_next/static/dwZwPqOhb2-foW3pXeSaR/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&display=swap">@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxjPg.woff) format('woff')}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8SKtjPg.woff) format('woff')}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPx3cwgknk-6nFg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxTcwgknk-6nFg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxPcwgknk-6nFg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPx_cwgknk-6nFg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPx7cwgknk-6nFg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxDcwgknk-4.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPx3cwgknk-6nFg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxTcwgknk-6nFg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxPcwgknk-6nFg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPx_cwgknk-6nFg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPx7cwgknk-6nFg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxDcwgknk-4.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next" data-reactroot=""><style data-emotion="css-global tp5msl">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}html{font-family:Pretendard,sans-serif;background-color:#fff;color:#000;overscroll-behavior-y:none;overflow-y:auto;}body{line-height:1.5;}a{-webkit-text-decoration:none;text-decoration:none;color:#000;}a:visited{all:unset;}</style><style data-emotion="css 1r7aulx">.css-1r7aulx{max-width:768px;min-height:100vh;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-left:1px solid #000;border-right:1px solid #000;margin:0 auto;}@media screen and (max-width: 768px){.css-1r7aulx{border-left:none;border-right:none;}}</style><div class="css-1r7aulx"><style data-emotion="css vwll15">.css-vwll15{position:-webkit-sticky;position:sticky;top:0;padding:20px;border-bottom:1px solid #000;background-color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);-webkit-transition:-webkit-transform 0.4s;transition:transform 0.4s;}</style><header class="css-vwll15"><style data-emotion="css 167z7h7">.css-167z7h7{font-family:JetBrains Mono;font-weight:700;font-size:18px;color:#000;line-height:1;}</style><a href="/" class="css-167z7h7">kimjeongwonn</a><style data-emotion="css ugbd65">.css-ugbd65{display:block;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;margin:0;margin-top:8px;padding:0;background:none;border:none;font-family:JetBrains Mono;font-size:18px;line-height:1;cursor:pointer;width:-webkit-max-content;width:-moz-max-content;width:max-content;}</style><a href="/about" class="css-ugbd65">about</a></header><style data-emotion="css 1t5arkg">.css-1t5arkg{position:fixed;top:20px;right:20px;}</style><ul class="css-1t5arkg"><li class="css-0"><a href="/2021" class="css-ugbd65">2021</a></li><style data-emotion="css clp0bv">.css-clp0bv a{font-weight:700;}</style><li class="css-clp0bv"><a href="/" class="css-ugbd65">2020</a></li></ul><main class="css-1xdhyk6"><ul class="css-1xdhyk6"><a href="/2020/%EC%9D%B4%ED%84%B0%EB%9F%AC%EB%B8%94-%EC%9D%B4%ED%84%B0%EB%A0%88%EC%9D%B4%ED%84%B0-%EC%A0%9C%EB%84%A4%EB%A0%88%EC%9D%B4%ED%84%B0"><style data-emotion="css 1xxq2jf">.css-1xxq2jf{border-bottom:1px solid #eaeaea;padding:20px 0 20px 20px;cursor:pointer;}</style><li class="css-1xxq2jf"><style data-emotion="css uhi5cv">.css-uhi5cv{display:block;font-size:12px;margin-bottom:10px;}</style><time class="css-uhi5cv">2020/06/14</time><style data-emotion="css 16cqe24">.css-16cqe24{font-size:16px;font-weight:700;}</style><h3 class="css-16cqe24">이터러블/이터레이터/제네레이터</h3><style data-emotion="css o8afis">.css-o8afis{font-size:12px;margin-top:10px;}</style><p class="css-o8afis">자바스크립트의 이터러블과 이터레이터, 그리고 제네레이터의 동작 방식</p></li></a></ul></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postList":[{"slug":"이터러블-이터레이터-제네레이터","content":"\u003cp\u003e자바스크립트 공부중 어려웠던 내용을 복습해 보려고 한다. 그 중 하나가 Iterable / Iterator / Generator 였다. 패스트캠퍼스 Nodejs 올인원 패키지에서는 제대로 설명해 주지 않아서 조금 아쉬웠다. 강좌의 분량을 생각하면 어쩔 수 없기도 했지만, 이해하는데 꽤나 시간을 많이 들였다. 물론 지금도 바로 설명하라고 하면 한참을 어버버 거릴 것 같다. 지식의 상태로 있는 내용들을 내것으로 만드는 건 반복 학습 뿐이라고 생각되기 때문에 다시 한 번 정리해 본다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003ch5\u003e참고 자료 :\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003ehttps://poiemaweb.com/es6-iteration-for-of\u003c/li\u003e\n\u003cli\u003ehttps://poiemaweb.com/es6-generator\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch1\u003eIteration Protocol\u003c/h1\u003e\n\u003cp\u003eES6에서 새로 도입된 데이터 컬렉션 객체(대표적으로 Array)를 순회하기 위한 Protocol(정의된 규칙)이다. 이 프로토콜을 준수한 객체만이 for of 문으로 순회할 수 있고 Spread문법의 피연산자가 될 수 있다. Iteration Protocol은 Iterable Protocol과 Iterator Protocol을 총칭한다.\u003c/p\u003e\n\u003ch2\u003e1. 이터러블(Iterable)\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eSymbol.iterator를 키로 갖고있는 메소드를 가지고 있는 객체를 말한다.\u003c/strong\u003e 별도로 Symbol.iterator를 키로 하여 메소드를 정의해 주거나 프로토타입 상속을 통해서 Symbol.iterator를 키로 갖고있는 메소드를 갖고 있다면 Iterable Protocol의 조건을 충족하여 Iterable이라고 할 수 있다. Iterable객체는 for of문으로 순회할 수 있고 Spread문법의 피연산자로 사용할 수 있다. 대표적으로 Array 객체가 있다. \u003cem\u003e(ES9부터는 Object도 피연산자로 사용할 수 있다.)\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e array = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e];\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eSymbol\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eiterator\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e array); \u003cspan class=\"hljs-comment\"\u003e//true\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e item \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e array) {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(item);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e1.1 빌트인 이터러블\u003c/h3\u003e\n\u003cp\u003eES6를 기준으로 이터러블을 지원하는 객체는 아래와 같다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eArray, String, Map, Set, TypedArray(Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array), DOM data structure(NodeList, HTMLCollection), \u003cem\u003eArguments\u003c/em\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e2. 이터레이터(Iterator)\u003c/h2\u003e\n\u003cp\u003e이터러블 객체의 Symbol.iterator 메소드를 호출하면 Iterator객체를 반환한다. 반환된 Iterator객체는 next메소드를 소유하고 있으며 next메소드를 호출할 때 iterator result 객체를 반환한다면 Iterator Protocol을 충족하여 Iterator라고 할 수 있다. iterator result 객체는 value와 done 프로퍼티를 갖고 있으며, value는 현재 순회하는 값을 갖고 있고 done은 순회가 언제 끝나는지 알려준다. next메소드는 반복적을 호출되다가 모든 요소를 순회하게 되면 value프로퍼티는 undefined, done프로퍼티는 true가 되며 순회를 중단한다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e array = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e];\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e iterator = array[\u003cspan class=\"hljs-title class_\"\u003eSymbol\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eitrator\u003c/span\u003e]();\n\u003cspan class=\"hljs-comment\"\u003e//Symbol.itrator를 호출해서 반환된 iterator를 받는다.\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(iterator.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e()); \u003cspan class=\"hljs-comment\"\u003e//반복\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//{ value: 1, done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//{ value: 2, done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//{ value: 3, done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//{ value: 4, done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//{ value: 5, done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//{ value: undefined, done: true }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"https://images.velog.io/images/kimjeongwonn/post/32adbcb3-27a2-4ddc-97e1-b3b0ed4f2c1b/image.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2\u003e3. 이터러블 객체 순회하기\u003c/h2\u003e\n\u003cp\u003eIteration Protocol을 준수하는 객체를 순회하는 반복문/연산자가 있는데 대표적으로는 for of문이 있다. 이런 반복문/연산자들은 Iterable 객체에서 Iterator를 조작하여 iterator result를 참조해 명령을 실행한다.\u003c/p\u003e\n\u003ch3\u003e3.1 for of문\u003c/h3\u003e\n\u003cp\u003efor of문은 해당하는 객체의 Iterator를 통해 받는 iterator result객체의 done프로퍼티가 true가 될 때까지 value프로퍼티의 값을 순회하며 변수에 할당한다. 위의 빌트인 이터러블안의 객체는 모두 순환이 가능하기 때문에 문자열도 순환이 가능하다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e//배열\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e]) {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(i); \u003cspan class=\"hljs-comment\"\u003e//1 2 3 4 5\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-comment\"\u003e//문자열\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;abcde\u0026#x27;\u003c/span\u003e) {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(i); \u003cspan class=\"hljs-comment\"\u003e//\u0026#x27;a\u0026#x27; \u0026#x27;b\u0026#x27; \u0026#x27;c\u0026#x27; \u0026#x27;d\u0026#x27; \u0026#x27;e\u0026#x27;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e4. 제네레이터(Generator)\u003c/h2\u003e\n\u003cp\u003e직접 이터러블 객체를 만들 수도 있다. 먼저, Iteration Protocol에 맞춰 \u003cem\u003evalue와 done프로퍼티를 return하는 next메소드를 return하는 Symbol.iterator 메소드\u003c/em\u003e 를 직접 작성하여 객체에 할당해주는 방법도 있지만 제네레이터 함수를 이용해 더 쉽게 이터러블 객체를 생성할 수 있다.\u003c/p\u003e\n\u003cp\u003e아래 예제를 통해 제네레이터의 생성과 순회를 살펴보자.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e//function* 을 통해 제네레이터 함수를 만들 수 있다. (화살표 함수는 사용할 수 없다.)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e* \u003cspan class=\"hljs-title function_\"\u003ecounter\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Point 1\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n  \u003cspan class=\"hljs-comment\"\u003e//next 메소드를 호출하면 yield까지의 명령이 처리된 뒤, yield에서 반환되는 값이 iterator result 객체의 value에 할당된다. 그 뒤 다음 next메소드가 호출 될 때 까지 대기한다.\u003c/span\u003e\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Point 2\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Point 3\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e;\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;done\u0026#x27;\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e//모든 순회가 끝나고 done 프로퍼티가 true가 된다.\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e generatorObj = \u003cspan class=\"hljs-title function_\"\u003ecounter\u003c/span\u003e();\n\u003cspan class=\"hljs-comment\"\u003e/* 제네레이터 함수를 호출해서 제네레이터 객체를 생성한다.\n제네레이터를 통해 생성된 객체는 이터러블이면서 이터레이터이기 때문에 굳이 Symbol.iterator를 호출하지 않아도 next메소드를 통해 순회할 수 있다. */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e generatorObj) {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(i);\n}\n\u003cspan class=\"hljs-comment\"\u003e//이터러블 객체이기 때문에 for of 문으로 바로 순회가 가능하다.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//물론 이터레이터이기도 하기 때문에 next메소드를 호출하여 원하는 시점에서 호출이 가능하다.\u003c/span\u003e\n\ngeneratorObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n\u003cspan class=\"hljs-comment\"\u003e//next를 통해 순회하게 되면 yield로 반환된 값을 value프로퍼티의 값으로 갖는 iterator result 객체가 반환된다. 제네레이터 함수 안에 마지막 yield가 끝난 뒤에는 done프로퍼티는 true가 되며 순회가 종료된다.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위의 예제의 \u003cstrong\u003e제네레이터 함수\u003c/strong\u003e를 통해 \u003cstrong\u003e\u003cem\u003e이터러블이면서 이터레이터인\u003c/em\u003e 제네레이터 객체\u003c/strong\u003e를 생성하고 생성된 제네레이터 객체는 이터러블 처럼 for of를 통해 순회하거나 이터레이터 처럼 next메소드를 통해 순회할 수 있다.\u003c/p\u003e\n\u003ch3\u003e4.1 제네레이터에 인수를 전달하여 호출하기\u003c/h3\u003e\n\u003cp\u003e제네레이터 함수는 함수이기 때문에 인자를 받아 제네레이터 객체를 생성할 수 있다.\n다음과 같이 인자로 입력받은 횟수만큼 반복하는 제네레이터를 생성해보자.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e* \u003cspan class=\"hljs-title function_\"\u003egen\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003en\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt;= n; \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e i++) \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`current number : \u003cspan class=\"hljs-subst\"\u003e${i}\u003c/span\u003e, last number : \u003cspan class=\"hljs-subst\"\u003e${n}\u003c/span\u003e`\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e genObj = \u003cspan class=\"hljs-title function_\"\u003egen\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e//10번 순회할 수 있는 제네레이터 오브젝트를 생성\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(genObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e()); \u003cspan class=\"hljs-comment\"\u003e//반복 호출하면 아래와 같은 콘솔을 볼 수 있다.\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e/*\n제네레이터 함수 안에 있는 console.log가 출력\ncurrent number : 1, last number : 10\nnext메소드가 반환된 iterble result가 console.log를 통해 출력\n{value: 0, done: false}\n... 계속 순회하다가 인자로 넣은 마지막 숫자에 도달하면 아래와 같이 done이 true가 되어 순회를 종료\ncurrent number : 10, last number : 10\n{value: 10, done: false}\n{value: undefined, done: true}\n*/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e4.2 next메소드에 인수를 전달하여 제네레이터 호출하기\u003c/h3\u003e\n\u003cp\u003e제네레이터는 이터레이터와는 다르게 next메소드에 인자를 전달하면 제네레이터 함수의 yield에 할당되어 작동한다. 이를 통해 좀 더 유연하게 제네레이터를 활용할 수 있다.\n아래의 예제를 통해 인자가 어떻게 전달되는지 알 수 있다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e* \u003cspan class=\"hljs-title function_\"\u003egen\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003en\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e res;\n  res = \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e n;\n\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(res);\n  res = \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e res;\n\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(res);\n  res = \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e res;\n\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(res);\n  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e res;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e genObj = \u003cspan class=\"hljs-title function_\"\u003egen\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e//0 으로 초기값 지정\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(genObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e()); \u003cspan class=\"hljs-comment\"\u003e//제네레이터 함수 시작 =\u0026gt; value:0\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(genObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e//yield에 1을 전달 이후 함수 다시시작\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(genObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e//반복\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(genObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e//더이상 yield가 없기 때문에 종료\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(genObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e//{ value: undefined, done: true }\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e/*\n{ value: 0, done: false }\n{ value: 1, done: false }\n{ value: 2, done: false }\n{ value: 3, done: false }\n\n*/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003enext메소드에 인수가 있을 경우에는 yield는 두가지 역할을 하게 된다.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003evalue값 반환\u003c/li\u003e\n\u003cli\u003enext의 인수를 변수에 할당\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e먼저 res에 리터럴을 할당하기 위해서 자바스크립트가 yield n을 처리하게 된다. \u003cstrong\u003e그 과정에서 yield가 처리되면서 다음 next까지 함수가 일시정지 되게 된다.\u003c/strong\u003e 그리고 다음 next가 호출 될 때 받은 인자를 yield가 반환하여 res변수에 할당하게 된다. 그리고 다시 다음 yield까지 실행한 뒤 일시정지 된다. 이 과정이 마지막 yield까지 반복된다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://images.velog.io/images/kimjeongwonn/post/ccdb0940-e2fd-4b12-b7bb-f25a8bb52570/image.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch3\u003e4.3 return을 통해 제네레이터를 강제 종료\u003c/h3\u003e\n\u003cp\u003e제네레이터 함수 안에서 return이 실행되는 즉시 done은 true가 되고 return에서 반환된 값을 가진 iterator result 객체가 반환된 뒤 제네레이터가 종료된다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e* \u003cspan class=\"hljs-title function_\"\u003egen\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003en\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e ; \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e ; i++) {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (i \u0026gt; \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;end\u0026#x27;\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e i;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e genObj = \u003cspan class=\"hljs-title function_\"\u003egen\u003c/span\u003e();\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(genObj.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e()) \u003cspan class=\"hljs-comment\"\u003e//반복\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e/*\n{value: 0, done: false}\n{value: 1, done: false}\n{value: 2, done: false}\n{value: 3, done: false}\n{value: 4, done: false}\n{value: 5, done: false} //for of 등을 통한 순회에서는 여기까지만 순회한다.\n{value: \u0026#x27;end\u0026#x27;, done: true}\n{value: undefined, done: true}\n...\n*/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ereturn에서 값을 반환하면서 동신에 done이 true가 되기 때문에 for of문 들을 통한 순회에서는 그 전의 값까지만 순회한다.\u003c/p\u003e\n\u003ch3\u003e4.4 비동기 처리\u003c/h3\u003e\n\u003cp\u003e함수의 비동기 처리도 제네레이터를 통해 구현할 수 있지만 ES8의 async/await가 완전히 그 기능을 대체하고 있으니 이곳에 설명은 생략한다.\u003c/p\u003e\n\u003ch2\u003e마치며\u003c/h2\u003e\n\u003cp\u003e첫 번째 복습기록이다. 내가 이해가 안되었던 부분들을 최대한 이해할 수 있도록 풀어 썼다. 개인적으로는 next메소드에 인수를 넣어 호출할 때 어째서 인수로 넣은 값이 res에 할당된 뒤 console.log로 출력되는지 계속 고민했고, 그렇게 알게 된 내용을 좀 더 자세히 서술했다. 물론 다른 사람들은 당연하게 이해하고 넘어갈 수 있는 부분이었더라도 나는 저 부분이 쉽게 넘어가지지 않았다. 또한 나도 이렇게 복습/복기를 하면서 새로운 사실도 알게되었다. 현재는 React를 배우고 있는데 당연한 듯이 Object 객체에 Spread 연산을 쓰는 강의를 보면서 Object는 이터러블이 아닌데 어떻게 Spread연산이 동작하나 싶었는데 ES9부터 Object에서 Spread연산이 작동한다는 사실도 알게되었다.\u003c/p\u003e\n","createAt":"2020-06-14T02:04:07.000Z","title":"이터러블/이터레이터/제네레이터","excerpt":"자바스크립트의 이터러블과 이터레이터, 그리고 제네레이터의 동작 방식"}],"years":[2021,2020]},"__N_SSG":true},"page":"/[year]","query":{"year":"2020"},"buildId":"dwZwPqOhb2-foW3pXeSaR","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>